### ===========================================
### Room API テスト
### ===========================================
### 使い方: 各リクエストの上の「Send Request」をクリック
### ===========================================

@baseUrl = http://localhost:8081/api/v2

### -------------------------------------------
### ヘルスチェック（疎通確認）
### -------------------------------------------
GET {{baseUrl}}/health
Accept: application/json

### -------------------------------------------
### 一覧取得
### -------------------------------------------
GET {{baseUrl}}/rooms
Accept: application/json

### -------------------------------------------
### 詳細取得（複合キー）
### -------------------------------------------
GET {{baseUrl}}/rooms/osaka/FAC999/R999
Accept: application/json

### -------------------------------------------
### 新規作成
### -------------------------------------------
POST {{baseUrl}}/rooms
Content-Type: application/json
Accept: application/json

{
    "region": "tokyo",
    "facility_code": "FAC001",
    "room_number": "R101",
    "name": "会議室A",
    "capacity": 10,
    "is_active": true
}

### -------------------------------------------
### 更新
### -------------------------------------------
PUT {{baseUrl}}/rooms/tokyo/FAC001/R101
Content-Type: application/json
Accept: application/json

{
    "name": "会議室A（更新後）",
    "capacity": 20,
    "is_active": true
}

### -------------------------------------------
### 削除
### -------------------------------------------
DELETE {{baseUrl}}/rooms/tokyo/FAC001/R101
Accept: application/json

### -------------------------------------------
### 検索（地域で絞り込み）
### -------------------------------------------
GET {{baseUrl}}/rooms?region=osaka
Accept: application/json

### -------------------------------------------
### 検索（施設コードで絞り込み）
### -------------------------------------------
GET {{baseUrl}}/rooms?facility_code=FAC001
Accept: application/json

### -------------------------------------------
### 検索（有効フラグで絞り込み）
### -------------------------------------------
GET {{baseUrl}}/rooms?is_active=1
Accept: application/json

### -------------------------------------------
### ページネーション
### -------------------------------------------
GET {{baseUrl}}/rooms?page=1&per_page=5
Accept: application/json

### -------------------------------------------
### ソート（作成日で昇順）
### -------------------------------------------
GET {{baseUrl}}/rooms?sort_by=created_at&sort_order=asc
Accept: application/json

### -------------------------------------------
### ソート（作成日で降順）
### -------------------------------------------
GET {{baseUrl}}/rooms?sort_by=created_at&sort_order=desc
Accept: application/json

### -------------------------------------------
### 組み合わせ（ページネーション + ソート）
### -------------------------------------------
GET {{baseUrl}}/rooms?page=1&per_page=10&sort_by=created_at&sort_order=desc
Accept: application/json

### ===========================================
### エラーケース
### ===========================================

### -------------------------------------------
### 404エラー: 存在しないリソースの取得
### 期待: 404 Not Found
### -------------------------------------------
GET {{baseUrl}}/rooms/nonexistent/nonexistent/nonexistent
Accept: application/json

### -------------------------------------------
### 404エラー: 存在しないリソースの更新
### 期待: 404 Not Found
### -------------------------------------------
PUT {{baseUrl}}/rooms/nonexistent/nonexistent/nonexistent
Content-Type: application/json
Accept: application/json

{
    "dummy": "value"
}

### -------------------------------------------
### 404エラー: 存在しないリソースの削除
### 期待: 404 Not Found
### -------------------------------------------
DELETE {{baseUrl}}/rooms/nonexistent/nonexistent/nonexistent
Accept: application/json

### -------------------------------------------
### 422エラー: 空のリクエストボディ（必須フィールド不足）
### 期待: 422 Unprocessable Entity
### -------------------------------------------
POST {{baseUrl}}/rooms
Content-Type: application/json
Accept: application/json

{}

### -------------------------------------------
### 422エラー: capacity の型不正
### 期待: 422 Unprocessable Entity
### -------------------------------------------
POST {{baseUrl}}/rooms
Content-Type: application/json
Accept: application/json

{
    "region": "tokyo",
    "facility_code": "FAC001",
    "room_number": "R101",
    "name": "会議室A",
    "capacity": "not-a-number",
    "is_active": true
}

### -------------------------------------------
### 422エラー: is_active の型不正
### 期待: 422 Unprocessable Entity
### -------------------------------------------
POST {{baseUrl}}/rooms
Content-Type: application/json
Accept: application/json

{
    "region": "tokyo",
    "facility_code": "FAC001",
    "room_number": "R101",
    "name": "会議室A",
    "capacity": 10,
    "is_active": "not-a-boolean"
}

### -------------------------------------------
### 422エラー: region の最大長超過（max:50）
### 期待: 422 Unprocessable Entity
### -------------------------------------------
POST {{baseUrl}}/rooms
Content-Type: application/json
Accept: application/json

{
    "region": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
    "facility_code": "FAC001",
    "room_number": "R101",
    "name": "会議室A",
    "capacity": 10,
    "is_active": true
}

### -------------------------------------------
### 422エラー: facility_code の最大長超過（max:10）
### 期待: 422 Unprocessable Entity
### -------------------------------------------
POST {{baseUrl}}/rooms
Content-Type: application/json
Accept: application/json

{
    "region": "tokyo",
    "facility_code": "aaaaaaaaaaaaaaaaaaaa",
    "room_number": "R101",
    "name": "会議室A",
    "capacity": 10,
    "is_active": true
}

### -------------------------------------------
### 422エラー: room_number の最大長超過（max:10）
### 期待: 422 Unprocessable Entity
### -------------------------------------------
POST {{baseUrl}}/rooms
Content-Type: application/json
Accept: application/json

{
    "region": "tokyo",
    "facility_code": "FAC001",
    "room_number": "aaaaaaaaaaaaaaaaaaaa",
    "name": "会議室A",
    "capacity": 10,
    "is_active": true
}

### -------------------------------------------
### 422エラー: name の最大長超過（max:100）
### 期待: 422 Unprocessable Entity
### -------------------------------------------
POST {{baseUrl}}/rooms
Content-Type: application/json
Accept: application/json

{
    "region": "tokyo",
    "facility_code": "FAC001",
    "room_number": "R101",
    "name": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
    "capacity": 10,
    "is_active": true
}
